{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nexport const fetchPhotos = async (searchedValue, page) => {\n  const fetchParams = new URLSearchParams({\n    q: searchedValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n    key: '45532957-9c3fb9f5acbf0ac0bdba7e21a',\n  });\n\n  const photos = await axios.get(`https://pixabay.com/api/?${fetchParams}`);\n  return photos.data;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallery = document.querySelector('.gallery');\n\nexport const createGallery = data => {\n  let lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  let image = data.hits\n    .map(\n      hit =>\n        `<div class=\"image-card\"><a href=\"${hit.largeImageURL}\"><img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" /></a><div class=\"wrapper\"><div class=\"wrapper-text\"><h5>Likes</h5><p>${hit.likes}</p></div><div class=\"wrapper-text\"><h5>Views</h5><p>${hit.views}</p></div><div class=\"wrapper-text\"><h5>Comments</h5><p>${hit.comments}</p></div><div class=\"wrapper-text\"><h5>Downloads</h5><p>${hit.downloads}</p></div></div></div>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', image);\n  lightbox.refresh();\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\n\nconst gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.form');\nconst requestInput = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet searchedValue = '';\nlet page = 1;\nlet totalPhotos = 0;\nlet cardHeight = 0;\n\nconst onFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    page = 1;\n    totalPhotos = 0;\n    loadMoreBtn.classList.add('is-hidden');\n    if (requestInput.value === '') {\n      iziToast.error({\n        message: 'Enter your request',\n        close: 'true',\n        position: 'topRight',\n        color: '#ef4040',\n        messageColor: 'white',\n      });\n    } else {\n      searchedValue = requestInput.value;\n      loader.classList.remove('is-hidden');\n      const response = await fetchPhotos(searchedValue, page);\n      totalPhotos += response.hits.length;\n\n      if (response.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          close: 'true',\n          position: 'topRight',\n          color: '#ef4040',\n          messageColor: 'white',\n        });\n        loadMoreBtn.classList.add('is-hidden');\n        loader.classList.add('is-hidden');\n        searchForm.reset();\n        return;\n      } else if (totalPhotos === response.totalHits) {\n        loadMoreBtn.classList.add('is-hidden');\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          close: 'true',\n          position: 'topRight',\n        });\n      } else {\n        loadMoreBtn.classList.remove('is-hidden');\n      }\n      createGallery(response);\n      const galleryCard = gallery.querySelector('div');\n      cardHeight = galleryCard.getBoundingClientRect().height;\n      loader.classList.add('is-hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `An error ${error} occurred`,\n      close: 'true',\n      position: 'topRight',\n      color: '#ef4040',\n      messageColor: 'white',\n    });\n  }\n  searchForm.reset();\n};\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    page++;\n    loader.classList.remove('is-hidden');\n    loadMoreBtn.classList.add('is-hidden');\n    const response = await fetchPhotos(searchedValue, page);\n    totalPhotos += response.hits.length;\n    if (response.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        close: 'true',\n        position: 'topRight',\n        color: '#ef4040',\n        messageColor: 'white',\n      });\n    }\n    createGallery(response);\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    loader.classList.add('is-hidden');\n    loadMoreBtn.classList.remove('is-hidden');\n    if (totalPhotos == response.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        close: 'true',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `An error ${error} occurred`,\n      close: 'true',\n      position: 'topRight',\n      color: '#ef4040',\n      messageColor: 'white',\n    });\n  }\n};\n\nsearchForm.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["fetchPhotos","searchedValue","page","fetchParams","axios","gallery","createGallery","data","lightbox","SimpleLightbox","image","hit","searchForm","requestInput","loader","loadMoreBtn","totalPhotos","cardHeight","onFormSubmit","event","iziToast","response","error","onLoadMoreBtnClick"],"mappings":"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"}